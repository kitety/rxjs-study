<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/5.0.1/Rx.min.js"></script>
  </head>

  <body>
    <script>
      // var subject = new Rx.Subject();

      // var observerA = {
      //   next: (value) => console.log("A next: " + value),
      //   error: (error) => console.log("A error: " + error),
      //   complete: () => console.log("A complete!"),
      // };

      // var observerB = {
      //   next: (value) => console.log("B next: " + value),
      //   error: (error) => console.log("B error: " + error),
      //   complete: () => console.log("B complete!"),
      // };

      // subject.subscribe(observerA);

      // subject.next(1);
      // // "A next: 1"
      // subject.next(2);
      // // "A next: 2"
      // subject.next(3);
      // // "A next: 3"

      // setTimeout(() => {
      //   subject.subscribe(observerB); // 3 秒後才訂閱，observerB 不會收到任何值。
      // }, 3000);

      // var subject = new Rx.BehaviorSubject(0); // 0 為起始值
      // var observerA = {
      //   next: (value) => console.log("A next: " + value),
      //   error: (error) => console.log("A error: " + error),
      //   complete: () => console.log("A complete!"),
      // };

      // var observerB = {
      //   next: (value) => console.log("B next: " + value),
      //   error: (error) => console.log("B error: " + error),
      //   complete: () => console.log("B complete!"),
      // };

      // subject.subscribe(observerA);
      // // "A next: 0"
      // subject.next(1);
      // // "A next: 1"
      // subject.next(2);
      // // "A next: 2"
      // subject.next(3);
      // // "A next: 3"

      // setTimeout(() => {
      //   subject.subscribe(observerB);
      //   // "B next: 3"
      // }, 3000);
      // var subject = new Rx.ReplaySubject(2); // 重複發送最後 2 個元素
      // var observerA = {
      //   next: (value) => console.log("A next: " + value),
      //   error: (error) => console.log("A error: " + error),
      //   complete: () => console.log("A complete!"),
      // };

      // var observerB = {
      //   next: (value) => console.log("B next: " + value),
      //   error: (error) => console.log("B error: " + error),
      //   complete: () => console.log("B complete!"),
      // };

      // subject.subscribe(observerA);
      // subject.next(1);
      // // "A next: 1"
      // subject.next(2);
      // // "A next: 2"
      // subject.next(3);
      // // "A next: 3"

      // setTimeout(() => {
      //   subject.subscribe(observerB);
      //   // "B next: 2"
      //   // "B next: 3"
      // }, 3000);

      // AsyncSubject 是最怪的一个变形，他有点像是operator last
      var subject = new Rx.AsyncSubject();
      var observerA = {
        next: (value) => console.log("A next: " + value),
        error: (error) => console.log("A error: " + error),
        complete: () => console.log("A complete!"),
      };

      var observerB = {
        next: (value) => console.log("B next: " + value),
        error: (error) => console.log("B error: " + error),
        complete: () => console.log("B complete!"),
      };

      subject.subscribe(observerA);
      subject.next(1);
      subject.next(2);
      subject.next(3);
      subject.complete();
      // "A next: 3"
      // "A complete!"

      setTimeout(() => {
        subject.subscribe(observerB);
        // "B next: 3"
        // "B complete!"
      }, 3000);
    </script>
  </body>
</html>
